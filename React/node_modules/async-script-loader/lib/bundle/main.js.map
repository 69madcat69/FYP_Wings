{"version":3,"file":"main.js","sources":["../../node_modules/uuid/lib/rng-browser.js","../../node_modules/uuid/lib/bytesToUuid.js","../../node_modules/uuid/v4.js","../../src/main.js"],"sourcesContent":["// Unique ID creation requires a high quality random # generator.  In the\n// browser this is a little complicated due to unknown quality of Math.random()\n// and inconsistent support for the `crypto` API.  We do the best we can via\n// feature-detection\n\n// getRandomValues needs to be invoked in a context where \"this\" is a Crypto implementation.\nvar getRandomValues = (typeof(crypto) != 'undefined' && crypto.getRandomValues.bind(crypto)) ||\n                      (typeof(msCrypto) != 'undefined' && msCrypto.getRandomValues.bind(msCrypto));\nif (getRandomValues) {\n  // WHATWG crypto RNG - http://wiki.whatwg.org/wiki/Crypto\n  var rnds8 = new Uint8Array(16); // eslint-disable-line no-undef\n\n  module.exports = function whatwgRNG() {\n    getRandomValues(rnds8);\n    return rnds8;\n  };\n} else {\n  // Math.random()-based (RNG)\n  //\n  // If all else fails, use Math.random().  It's fast, but is of unspecified\n  // quality.\n  var rnds = new Array(16);\n\n  module.exports = function mathRNG() {\n    for (var i = 0, r; i < 16; i++) {\n      if ((i & 0x03) === 0) r = Math.random() * 0x100000000;\n      rnds[i] = r >>> ((i & 0x03) << 3) & 0xff;\n    }\n\n    return rnds;\n  };\n}\n","/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\nvar byteToHex = [];\nfor (var i = 0; i < 256; ++i) {\n  byteToHex[i] = (i + 0x100).toString(16).substr(1);\n}\n\nfunction bytesToUuid(buf, offset) {\n  var i = offset || 0;\n  var bth = byteToHex;\n  return bth[buf[i++]] + bth[buf[i++]] +\n          bth[buf[i++]] + bth[buf[i++]] + '-' +\n          bth[buf[i++]] + bth[buf[i++]] + '-' +\n          bth[buf[i++]] + bth[buf[i++]] + '-' +\n          bth[buf[i++]] + bth[buf[i++]] + '-' +\n          bth[buf[i++]] + bth[buf[i++]] +\n          bth[buf[i++]] + bth[buf[i++]] +\n          bth[buf[i++]] + bth[buf[i++]];\n}\n\nmodule.exports = bytesToUuid;\n","var rng = require('./lib/rng');\nvar bytesToUuid = require('./lib/bytesToUuid');\n\nfunction v4(options, buf, offset) {\n  var i = buf && offset || 0;\n\n  if (typeof(options) == 'string') {\n    buf = options === 'binary' ? new Array(16) : null;\n    options = null;\n  }\n  options = options || {};\n\n  var rnds = options.random || (options.rng || rng)();\n\n  // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n  rnds[6] = (rnds[6] & 0x0f) | 0x40;\n  rnds[8] = (rnds[8] & 0x3f) | 0x80;\n\n  // Copy bytes to buffer, if provided\n  if (buf) {\n    for (var ii = 0; ii < 16; ++ii) {\n      buf[i + ii] = rnds[ii];\n    }\n  }\n\n  return buf || bytesToUuid(rnds);\n}\n\nmodule.exports = v4;\n","import uuid from 'uuid/v4'\n\nconst LOADED = 'loaded'\nconst ERROR = 'error'\n\nconst scriptMap = new Map()\n\n/**\n * Clean up the callback\n *\n * @param {string} callback The callback function name\n *\n * @return {void}\n */\nconst cleanup = callback => {\n  if (!window[callback] || typeof window[callback] !== 'function') {\n    return\n  }\n\n  window[callback] = null\n}\n\n/**\n * Load a script asynchronously\n *\n * @param {string} script The script to load\n * @param {bool} reload If the script should be loaded even if it was loaded before\n *\n * @return {Promise}\n */\nexport const load = (script, reload = false) => {\n  let src = script\n  const id = uuid()\n  const key = reload ? `${script}${id}` : script\n  if (scriptMap.has(key)) {\n    const item = scriptMap.get(key)\n    if (item.promise) {\n      return item.promise\n    }\n\n    if (item.error) {\n      return Promise.resolve(item.error)\n    }\n\n    return Promise.resolve(null, item)\n  }\n\n  const callbackName = `callback_${uuid().replace(/-/g, '_')}`\n  const tag = window.document.createElement('script')\n  tag.type = 'text/javascript'\n  tag.async = false\n\n  // Create the promise to return if it is already\n  // resolving\n  const promise = new Promise((resolve, reject) => {\n    const handleResult = state => evt => {\n      const instance = scriptMap.get(key)\n      if (state === LOADED) {\n        instance.loaded = true\n        resolve(evt)\n      } else if (state === ERROR) {\n        instance.error = evt\n        reject(evt)\n      }\n\n      instance.promise = null\n      scriptMap.set(key, instance)\n      cleanup(callbackName)\n    }\n\n    // Add error handlers\n    tag.onerror = handleResult(ERROR)\n    tag.onreadystatechange = () => {\n      handleResult(tag.readyState)\n    }\n\n    // Replace callback if there is one\n    // or just resolve the promise\n    if (script.match(/callback=CALLBACK_PLACEHOLDER/)) {\n      src = src.replace(/(callback=)[^&]+/, `$1${callbackName}`)\n      window[callbackName] = handleResult(LOADED)\n    } else {\n      tag.onload = handleResult(LOADED)\n      tag.addEventListener('load', tag.onload)\n    }\n\n    // Start loading the script\n    tag.src = src\n    window.document.body.appendChild(tag)\n  })\n\n  const initialState = {\n    loaded: false,\n    error: false,\n    promise,\n  }\n\n  scriptMap.set(key, initialState)\n\n  return promise\n}\n\nexport default load\n"],"names":["rng","bytesToUuid","LOADED","ERROR","scriptMap","Map","cleanup","window","callback","load","script","reload","src","id","uuid","key","has","item","get","promise","error","Promise","resolve","callbackName","replace","tag","document","createElement","type","async","reject","handleResult","instance","state","loaded","evt","set","onerror","onreadystatechange","readyState","match","onload","addEventListener","body","appendChild","initialState"],"mappings":"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"}